<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add New Invoice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
</head>
<body>
<div class="container">
    <h2>Add New Invoice</h2><br>
    <form action="#" th:action="@{/saveInvoice}" th:object="${invoiceInfo}" method="POST">

        <!--        <input type="number" th:field="*{SNo}"-->
        <!--               placeholder="Sno" class="form-control mb-4 col-4">-->
        <input type="hidden" th:field="*{primaryKey}"
               placeholder="primaryKey" class="form-control mb-4 col-4">

        <input type="text" th:field="*{invoiceNo}"
               placeholder="invoiceNo" class="form-control mb-4 col-4">

        <input type="text" th:field="*{billTo}"
               placeholder="billTo" class="form-control mb-4 col-4">

        <input type="text" th:field="*{status}"
               placeholder="status" class="form-control mb-4 col-4">

        <input type="date" th:field="*{invoiceDate}"
               placeholder="invoiceDate" class="form-control mb-4 col-4">

        <input type="date" th:field="*{dueDate}"
               placeholder="dueDate" class="form-control mb-4 col-4">
        <div>
            <table border="1" class="table table-striped table-responsive-md">
                <thead>
                <tr>
                    <th>SNo</th>
                    <th>Product</th>
                    <th>Description</th>
                    <th>Price</th>
                    <th>Qty</th>
                    <th>Tax%</th>
                    <th>Total</th>
                    <th>
                        <button type="submit" name="addRow" onclick="addRow()">Add row</button>
                    </th>

                </tr>
                </thead>

                <tbody th:object="${listOfProducts}" id="tbody">

                <!--                <tr th:each="listOfProduct,listOfProductStat:*{listOfProducts}">-->

                <!--                    <td th:text="${listOfProductStat.count}">1</td>-->

                <!--                    <td>-->
                <!--                        <input type="text" th:field="*{listOfProducts.productName}" th:errorclass="fieldError">-->

                <!--                    </td>-->

                <!--                    <td>-->
                <!--                         <textarea class="form-control rounded-0" name="description" id="description" rows="3"-->
                <!--                                   maxlength="500"-->
                <!--                                   placeholder="Description"-->
                <!--                                   th:field="*{listOfProducts.description}"></textarea>-->
                <!--                    </td>-->

                <!--                    <td>-->
                <!--                        <input type="number" name="price" id="price" class="form-control"-->
                <!--                               th:field="*{listOfProducts[__${listOfProductStat.index}__].price}" placeholder="Price">-->
                <!--                    </td>-->

                <!--                    <td>-->
                <!--                        <input type="number" name="qty" class="form-control" id="qty" placeholder="Qty"-->
                <!--                               th:field="*{listOfProducts[__${listOfProductStat.index}__].qty}">-->
                <!--                    </td>-->

                <!--                    <td>-->
                <!--                        <input type="number" name="taxPercent" class="form-control" id="taxPercent" placeholder="Tax(%)"-->
                <!--                               th:field="*{listOfProducts[__${listOfProductStat.index}__].taxPercent}">-->
                <!--                    </td>-->

                <!--                    <td>-->
                <!--                        <input type="number" name="total" class="form-control" id="total" placeholder="Total"-->
                <!--                               th:field="*{listOfProducts[__${listOfProductStat.index}__].total}">-->
                <!--                    </td>-->
                <!--                    <td>-->
                <!--                        <button type="submit" name="removeRow" th:value="${listOfProductStat.index}" >Remove row</button>-->
                <!--                    </td>-->

                <!--                </tr>-->

                    <tr>
                        <th:block th:each="listOfProduct :${listOfProducts}">
                        <td >1</td>

                        <td>
                            <input type="text" name="productName" th:name="${listOfProducts[__${listOfProductStat.index}__].productName}" th:value="${listOfProducts.productName}">

                        </td>

                        <td>
                             <textarea class="form-control rounded-0" name="description" id="description" rows="3"
                                       maxlength="500"
                                       placeholder="Description"
                                        ></textarea>
                        </td>

                        <td>
                            <input type="number" name="price" id="price" class="form-control" placeholder="Price">
                        </td>

                        <td>
                            <input type="number" name="qty" class="form-control" id="qty" placeholder="Qty">
                        </td>

                        <td>
                            <input type="number" name="taxPercent" class="form-control" id="taxPercent" placeholder="Tax(%)">
                        </td>

                        <td>
                            <input type="number" name="total" class="form-control" id="total" placeholder="Total">
                        </td>
                        <td>
                            <button type="submit" name="removeRow"  >Remove row</button>
                        </td>
                        </th:block>

                    </tr>

                </tbody>

            </table>
        </div>

        <button type="submit" class="btn btn-primary">save</button>
    </form>

</div>
<script type="text/javascript" src="script.js">
</script>
</body>
</html>